const db = require('../models/index');
const getComments = async (req, res) => {
  try {
      const data = await db.comments.find().populate('posts')
      res.json({data})
  } catch (error) {
      res.json({error})
  }
};
const getCommentsById = async (req, res) => {
  try {
    const objId = req.body.id
    const data = await db.comments.findOne({objId}).populate('posts')
    res.json({data})
  } catch (error) {
    res.json({error})
  }
};
const insertData = async (req, res) => {
    try {
      const data = await db.comments.create({
        description: req.body.description,
        postId: req.body.postId,
        createdAt: Date.now(),
        createdBy: req.body.createdBy
      })
    } catch (error) {
      
    }
};
const updateData = async (req, res) => {
    try {
      const paramsId = req.body.id
      const data = await db.comments.findByIdAndUpdate(paramsId, {description: req.body.description});
      res.json({data})
    } catch (error) {
      res.json({error})
    }
};
const DeleteData = async (req, res) => {
    try {
      const objId = req.body.id
      const data = await db.comments.deleteOne({objId})
    } catch (error) {
      res.json({error})
    }
};
module.exports = {
    getComments,
    getCommentsById,
    insertData,
    updateData,
    DeleteData
}